<!doctype html>
  <html lang="en">
  <!-- For template and build workflow details, see docs/DEVELOPMENT-WORKFLOW.md -->
  <head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{TITLE}} | I Knit The Web</title>
    <!-- If TITLE is not set, fallback to 'New Page' for accessibility compliance -->
    <script>
      if (document.title.trim() === '' || document.title.includes('{{TITLE}}')) {
        document.title = 'New Page | I Knit The Web';
      }
    </script>
    <meta name="description" content="{{DESCRIPTION}}" />
    <meta name="keywords" content="{{KEYWORDS}}" />
    <meta name="author" content="I Knit the Web" />
    <meta name="robots" content="{{ROBOTS}}" />
    <link rel="canonical" href="{{BASE_URL}}dist/pages/{{PAGE_NAME}}.html" />
    <meta property="og:title" content="{{OG_TITLE}}" />
    <meta property="og:description" content="{{OG_DESCRIPTION}}" />
    <meta property="og:image" content="{{OG_IMAGE}}" />
    <meta property="og:url" content="{{OG_URL}}" />
    <meta property="og:type" content="{{OG_TYPE}}" />
    <meta name="twitter:card" content="{{TWITTER_CARD}}" />
    <meta name="twitter:title" content="{{TWITTER_TITLE}}" />
    <meta name="twitter:description" content="{{TWITTER_DESCRIPTION}}" />
    <meta name="twitter:image" content="{{TWITTER_IMAGE}}" />

    <style>
      body {
        visibility: hidden;
      }
      .css-loaded body {
        visibility: visible;
      }
    </style>

    <link
      rel="icon"
      type="image/x-icon"
      href="{{ASSET_URL}}src\img\favicon_io\favicon.ico" />

    <link
      rel="preconnect"
      href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com" />

    <link
      href="{{GOOGLE_FONTS_LINK}}"
      rel="stylesheet"
      media="print"
      onload="this.media='all'; this.onload=null;"
      onerror="this.remove(); document.documentElement.classList.add('fonts-failed');" />
    <noscript>
      <link
        href="{{GOOGLE_FONTS_LINK}}"
        rel="stylesheet" />
    </noscript>


    <link
      rel="stylesheet"
      href="{{BASE_URL}}dist/css/{{PAGE_NAME}}.purged.min.css"
      onload="window.mainCSSLoaded = true;" />

    <div
      id="page-data"
      data-page-title="{{TITLE}}"
      data-page-subtitle="{{SUBTITLE}}"
      data-nav-config="{{NAV_CONFIG}}"
      data-breadcrumb-category="{{BREADCRUMB_CATEGORY}}"
      data-breadcrumb-category-url="{{BREADCRUMB_CATEGORY_URL}}"
      style="display: none"></div>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "{{SCHEMA_TYPE}}",
        "name": "{{SCHEMA_NAME}}",
        "description": "{{SCHEMA_DESCRIPTION}}",
        "url": "{{SCHEMA_URL}}",
        "image": "{{SCHEMA_IMAGE}}",
        "sameAs": {{SCHEMA_SAMEAS}},
        "knowsAbout": {{SCHEMA_KNOWSABOUT}}
      }
    </script>

      defer
      src="https://kit.fontawesome.com/94262366bd.js"
      crossorigin="anonymous"></script>

    <script
      type="module"
      src="/src/js/script.js"></script>

    <script>
      // Wait for CSS to load before showing content
      function checkCSSLoaded() {
        if (window.mainCSSLoaded && document.readyState !== 'loading') {
          document.documentElement.classList.add('css-loaded');
          // Add fonts-failed class immediately since we're using system fonts only
          document.documentElement.classList.add('fonts-failed');
        } else {
          requestAnimationFrame(checkCSSLoaded);
        }
      }
      checkCSSLoaded();

      // Fallback: Show content after 3 seconds even if CSS fails to load
      setTimeout(function () {
        if (!document.documentElement.classList.contains('css-loaded')) {
          console.warn('CSS loading timeout - showing content anyway');
          document.documentElement.classList.add('css-loaded');
          document.documentElement.classList.add('fonts-failed');
        }
      }, 3000);
    </script>
  </head>

  <body
    id="{{BODY_ID}}"
    class="{{BODY_CLASS}}">
    <!--@ Skip Link for Screen Readers -->
    <a
      href="-main-content"
      class="skip-link"
      >Skip to main content</a
    >
    {{HEADER}}

    <main id="main-content">
      <!-- page content goes here -->
    </main>

    {{FOOTER}}
  </body>
</html>
