//* ALIEN ABDUCTION FORM COMPONENT PARTIAL
//*
//* Place all styles for the reusable .alien-form component here.
//* Includes BEM classes like .alien-form, .alien-form__input, etc.
//* Do NOT put global form resets or page-level layout styles here.
//* Only styles specific to the alien abduction form component belong in this file.
//* ------------------------------------------------------------

//* ------------------------------------------------------------
//* ALIEN ABDUCTION FORM COMPONENT PARTIAL
//*
//* Place all styles for the reusable .alien-form component here.
//* Includes BEM classes like .alien-form, .alien-form__input, etc.
//* Do NOT put global form resets or page-level layout styles here.
//* Only styles specific to the alien abduction form component belong in this file.
//* ------------------------------------------------------------
@use '../A-abstracts' as a;

/* =====================================
   Alien Form Component
   ===================================== */

.alien-form {
  background: rgb(var(--alien-secondary-bg), 0.1);
  border: 2px solid var(--alien-border-color);
  border-radius: a.rem(12);
  padding: a.rem(40);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  box-shadow:
    0 8px 32px rgb(0 255 65 / 10%),
    inset 0 1px 0 rgb(255 255 255 / 10%);
  position: relative;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: a.rem(12);
    background: linear-gradient(135deg, rgb(0 255 65 / 3%) 0%, rgb(255 51 102 / 3%) 100%);
    pointer-events: none;
  }
}

.alien-form__inner {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: a.rem(40);
  position: relative;
  z-index: 1;

  @include a.breakpoint-down('799.98') {
    grid-template-columns: 1fr;
    gap: a.rem(24);
  }
}

/* =====================================
   Fieldset & Legend Styling
   ===================================== */

.alien-form__fieldset {
  border: 2px solid var(--alien-border-color);
  border-radius: a.rem(8);
  padding: a.rem(24);
  background: rgb(10 10 10 / 80%);
  position: relative;
  transition: all 0.3s ease;

  &:hover {
    border-color: var(--alien-accent);
    box-shadow: 0 4px 20px rgb(0 255 65 / 15%);
  }

  &:focus-within {
    border-color: var(--alien-accent);
    box-shadow: 0 0 0 3px rgb(0 255 65 / 20%);
  }
}

.alien-form__legend {
  font-family: var(--alien-font-family);
  font-size: a.rem(18);
  font-weight: 600;
  color: var(--alien-accent);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  padding: 0 a.rem(12);
  background: var(--alien-primary-bg);
  border: 1px solid var(--alien-accent);
  border-radius: a.rem(4);
  text-shadow: 0 0 8px var(--alien-glow-color);
}

/* =====================================
   Form Sections
   ===================================== */

.alien-form__contact-section,
.alien-form__abduction-section {
  display: flex;
  flex-direction: column;
}

.alien-form__details {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: a.rem(24);
  margin-top: a.rem(16);

  @include a.breakpoint-down('699.98') {
    grid-template-columns: 1fr;
    gap: a.rem(16);
    // The .alien-form-page__wrapper class has been moved to _alien-form-page.scss
  }

  /* =====================================
   Labels & Form Controls
   ===================================== */

  .alien-form__label {
    font-family: var(--alien-font-family);
    font-size: a.rem(14);
    font-weight: 500;
    color: var(--alien-text-light);
    margin-bottom: a.rem(4);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    display: block;
  }

  .alien-form__input,
  .alien-form__textarea,
  .alien-form__select {
    background: rgb(0 0 0 / 80%);
    border: 2px solid var(--alien-border-color);
    border-radius: a.rem(6);
    padding: a.rem(12) a.rem(16);
    color: var(--alien-text-light);
    font-family: var(--alien-font-family);
    font-size: a.rem(14);
    transition: all 0.3s ease;
    position: relative;
    width: 100%;
    box-sizing: border-box;
    &::-webkit-input-placeholder {
      color: var(--alien-text-dim);
      opacity: 0.7;
    }
    &::-moz-placeholder {
      color: var(--alien-text-dim);
      opacity: 0.7;
    }
    &:-ms-input-placeholder {
      color: var(--alien-text-dim);
      opacity: 0.7;
    }
    &::-ms-input-placeholder {
      color: var(--alien-text-dim);
      opacity: 0.7;
    }
    &::placeholder {
      color: var(--alien-text-dim);
      opacity: 0.7;
    }

    &:hover {
      border-color: var(--alien-accent);
      box-shadow: 0 2px 8px rgb(0 255 65 / 10%);
      transform: translateY(-1px);
    }

    &:focus {
      outline: none;
      border-color: var(--alien-accent);
      box-shadow:
        0 0 0 3px rgb(0 255 65 / 30%),
        0 4px 12px rgb(0 255 65 / 15%);
      background: rgb(0 0 0 / 90%);
      transform: scale(1.01);
    }

    &:valid:not(:placeholder-shown) {
      border-color: var(--alien-accent);
      background: rgb(0 255 65 / 5%);
    }

    &:invalid:not(:placeholder-shown) {
      border-color: var(--alien-accent-secondary);
      box-shadow: 0 0 0 2px rgb(255 51 102 / 20%);
      background: rgb(255 51 102 / 5%);
    }

    // Enhanced loading state
    &.loading {
      position: relative;
      pointer-events: none;

      &::after {
        content: '';
        position: absolute;
        top: 50%;
        right: a.rem(12);
        transform: translateY(-50%);
        width: a.rem(16);
        height: a.rem(16);
        border: 2px solid var(--alien-border-color);
        border-top: 2px solid var(--alien-accent);
        border-radius: 50%;
        -webkit-animation: spin 1s linear infinite;
        animation: spin 1s linear infinite;
        animation: spin 1s linear infinite;
      }
    }
  }

  @-webkit-keyframes spin {
    0% {
      transform: translateY(-50%) rotate(0deg);
    }

    100% {
      transform: translateY(-50%) rotate(360deg);
    }
  }

  @keyframes spin {
    0% {
      transform: translateY(-50%) rotate(0deg);
    }

    100% {
      transform: translateY(-50%) rotate(360deg);
    }
  }

  @keyframes spin {
    0% {
      transform: translateY(-50%) rotate(0deg);
    }

    100% {
      transform: translateY(-50%) rotate(360deg);
    }
  }

  .alien-form__textarea {
    min-height: a.rem(120);
    resize: vertical;
  }

  .alien-form__select {
    cursor: pointer;

    // Progressive enhancement approach for cross-browser compatibility
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;

    // Ensure dropdown still works by preserving native select behavior
    // while only removing visual styling

    // Custom dropdown arrow
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%2300ff41' viewBox='0 0 16 16'%3e%3cpath d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right a.rem(12) center;
    background-size: a.rem(16);
    padding-right: a.rem(40);

    // Cross-browser native dropdown arrow hiding
    &::-webkit-outer-spin-button,
    &::-webkit-inner-spin-button {
      -webkit-appearance: none;
      appearance: none;
      margin: 0;
    }

    &::-ms-expand {
      display: none;
    }

    // Firefox-specific fixes
    &::-moz-focus-inner {
      border: 0;
    }

    // Enhanced focus state for accessibility
    &:focus {
      outline: 2px solid var(--alien-accent);
      outline-offset: 1px;
    }

    // Fallback for browsers with poor appearance support
    @supports not (((-webkit-appearance: none) or (-moz-appearance: none) or (appearance: none))) {
      // Keep native styling if appearance isn't supported
      background-image: none;
      padding-right: a.rem(16);
    }
  }

  /* Option styling for select dropdown */
  .alien-form__option {
    background: rgb(0 0 0 / 95%) !important;
    color: var(--alien-text-light) !important;
    padding: a.rem(12) a.rem(16) !important;
    font-family: var(--alien-font-family) !important;
    font-size: a.rem(14) !important;
    border: none !important;
    min-height: a.rem(40) !important;

    &:hover,
    &:focus {
      background: rgb(0 255 65 / 20%) !important;
      color: var(--alien-text-light) !important;
    }

    &:checked,
    &:selected {
      background: rgb(0 255 65 / 40%) !important;
      color: var(--alien-primary-bg) !important;
      font-weight: 600 !important;
    }

    &:disabled {
      background: rgb(0 0 0 / 60%) !important;
      color: var(--alien-text-dim) !important;
      cursor: not-allowed !important;
    }
  }

  /* =====================================
   Radio Button Group
   ===================================== */

  .alien-form__radio-group-label {
    font-family: var(--alien-font-family);
    font-size: a.rem(14);
    font-weight: 500;
    color: var(--alien-text-light);
    margin: a.rem(16) 0 a.rem(8);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .alien-form__radio-group {
    display: flex;
    flex-direction: column;
    gap: a.rem(8);
  }

  .alien-form__radio-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: a.rem(8);
    border-radius: a.rem(6);
    transition: all 0.3s ease;

    &:hover {
      background: rgb(0 255 65 / 5%);
    }
  }

  .alien-form__radio {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    width: a.rem(18);
    height: a.rem(18);
    border: 2px solid var(--alien-border-color);
    border-radius: 50%;
    margin-right: a.rem(12);
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;

    &:checked {
      border-color: var(--alien-accent);
      background: var(--alien-accent);
      box-shadow: 0 0 8px rgb(0 255 65 / 40%);

      &::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: a.rem(6);
        height: a.rem(6);
        background: var(--alien-primary-bg);
        border-radius: 50%;
      }
    }

    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgb(0 255 65 / 30%);
    }
  }

  .alien-form__radio-text {
    font-family: var(--alien-font-family);
    font-size: a.rem(14);
    color: var(--alien-text-light);
    line-height: 1.4;
  }

  /* =====================================
   Checkbox Styling
   ===================================== */

  .alien-form__checkbox-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: a.rem(12);
    border: 2px solid var(--alien-border-color);
    border-radius: a.rem(6);
    transition: all 0.3s ease;
    margin: a.rem(16) 0;

    &:hover {
      border-color: var(--alien-accent);
      background: rgb(0 255 65 / 5%);
    }
  }

  .alien-form__checkbox {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    width: a.rem(18);
    height: a.rem(18);
    border: 2px solid var(--alien-border-color);
    border-radius: a.rem(4);
    margin-right: a.rem(12);
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;

    &:checked {
      border-color: var(--alien-accent);
      background: var(--alien-accent);
      box-shadow: 0 0 8px rgb(0 255 65 / 40%);

      &::after {
        content: '✓';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--alien-primary-bg);
        font-size: a.rem(12);
        font-weight: bold;
      }
    }

    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgb(0 255 65 / 30%);
    }
  }

  .alien-form__checkbox-text {
    font-family: var(--alien-font-family);
    font-size: a.rem(14);
    color: var(--alien-text-light);
    line-height: 1.4;
  }

  /* =====================================
   Submit Button
   ===================================== */

  .alien-form__submit {
    background: linear-gradient(135deg, var(--alien-accent) 0%, var(--alien-accent-secondary) 100%);
    border: none;
    border-radius: a.rem(8);
    padding: a.rem(16) a.rem(32);
    color: var(--alien-primary-bg);
    font-family: var(--alien-font-family);
    font-size: a.rem(16);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: a.rem(24);
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgb(255 255 255 / 20%), transparent);
      transition: left 0.5s ease;
    }

    &:hover {
      transform: translateY(-2px);
      box-shadow:
        0 8px 25px rgb(0 255 65 / 30%),
        0 4px 15px rgb(255 51 102 / 20%);

      &::before {
        left: 100%;
      }
    }

    &:active {
      transform: translateY(0);
    }

    &:focus {
      outline: none;
      box-shadow:
        0 0 0 3px rgb(0 255 65 / 40%),
        0 8px 25px rgb(0 255 65 / 30%);
    }
  }

  /* =====================================
   Responsive Design
   ===================================== */

  @include a.breakpoint-down('799.98') {
    .alien-form {
      padding: a.rem(24);
    }

    .alien-form__fieldset {
      padding: a.rem(16);
    }

    .alien-form__details {
      gap: a.rem(16);
    }
  }

  /* Enhanced Typography for Alien Theme */
  .alien-form__legend {
    font-family: Orbitron, var(--alien-font-family), sans-serif;
  }

  /* =====================================
   Enhanced Form Validation & Progress
   ===================================== */

  .alien-form__progress {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: a.rem(32);
    gap: a.rem(12);

    &-step {
      width: a.rem(12);
      height: a.rem(12);
      border-radius: 50%;
      background: var(--alien-border-color);
      transition: all 0.3s ease;
      position: relative;

      &--active {
        background: var(--alien-accent);
        box-shadow: 0 0 8px var(--alien-glow-color);

        &::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: a.rem(6);
          height: a.rem(6);
          background: var(--alien-primary-bg);
          border-radius: 50%;
        }
      }

      &--completed {
        background: var(--alien-accent);
        box-shadow: 0 0 12px var(--alien-glow-color);

        &::after {
          content: '✓';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          color: var(--alien-primary-bg);
          font-size: a.rem(8);
          font-weight: bold;
        }
      }
    }

    &-connector {
      width: a.rem(24);
      height: 2px;
      background: var(--alien-border-color);
      transition: all 0.3s ease;

      &--active {
        background: var(--alien-accent);
        box-shadow: 0 0 4px var(--alien-glow-color);
      }
    }
  }

  /* Enhanced Validation States */
  .alien-form__input,
  .alien-form__textarea,
  .alien-form__select {
    &--valid {
      border-color: var(--alien-accent);
      box-shadow: 0 0 0 1px rgb(0 255 65 / 20%);

      &::after {
        content: '✓';
        position: absolute;
        right: a.rem(12);
        top: 50%;
        transform: translateY(-50%);
        color: var(--alien-accent);
        font-size: a.rem(14);
        font-weight: bold;
      }
    }

    &--invalid {
      border-color: var(--alien-accent-secondary);
      box-shadow: 0 0 0 1px rgb(255 51 102 / 30%);
    }
  }

  /* Enhanced Field Completion Indicators */
  .alien-form__fieldset {
    &--completed {
      border-color: var(--alien-accent);
      background: rgb(0 255 65 / 2%);

      .alien-form__legend::after {
        content: ' ✓';
        color: var(--alien-accent);
        margin-left: a.rem(8);
      }
    }
  }

  /* =====================================
   Enhanced Responsive Design
   ===================================== */

  @include a.breakpoint-down('999.98') {
    .alien-form__inner {
      gap: a.rem(32);
    }
  }

  @include a.breakpoint-down('799.98') {
    .alien-form {
      padding: a.rem(24);
    }

    .alien-form__fieldset {
      padding: a.rem(16);
    }

    .alien-form__details {
      gap: a.rem(16);
    }

    .alien-form__input,
    .alien-form__textarea,
    .alien-form__select {
      font-size: a.rem(16); // Prevent zoom on iOS
    }
  }

  @include a.breakpoint-down('699.98') {
    .alien-form {
      padding: a.rem(16);
    }

    .alien-form__fieldset {
      padding: a.rem(12);
    }

    .alien-form__legend {
      font-size: a.rem(16);
    }

    .alien-form__progress {
      margin-bottom: a.rem(20);

      &-step {
        width: a.rem(10);
        height: a.rem(10);
      }

      &-connector {
        width: a.rem(16);
      }
    }

    // Disable expensive animations on mobile for performance
    .alien-form__fieldset::before,
    .alien-form::after {
      display: none;
    }

    .alien-form__input:focus,
    .alien-form__textarea:focus,
    .alien-form__select:focus {
      transform: none; // Disable scale on mobile to prevent viewport issues
    }
  }
}
